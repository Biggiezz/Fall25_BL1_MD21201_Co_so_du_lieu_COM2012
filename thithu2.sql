CREATE database PTPM_COM2012_PH63816;

use PTPM_COM2012_PH63816;


create table LOPHOC (
MALOP VARCHAR(50)NOT NULL primary key,
TENLOP VARCHAR(50) NOT NULL,
GIANGVIEN NVARCHAR(50) NOT NULL,
NGAYBATDAU DATE NOT NULL,
NGAYKETTHUC DATE NOT NULL
);

drop table LOPHOC;


insert into LOPHOC(MALOP, TENLOP, GIANGVIEN, NGAYBATDAU, NGAYKETTHUC) VALUES
('LOP01','LOP A2',N'NGUYỄN VĂN B','2025-09-15','2026-6-30'),
('LOP02','LOP A5',N'NGUYỄN VĂN Y','2025-09-15','2026-6-30'),
('LOP03','LOP A26',N'NGUYỄN VĂN P','2025-09-15','2026-6-30');

SELECT *FROM LOPHOC;

DROP TABLE SINHVIEN;

create table SINHVIEN(
MASINHVIEN VARCHAR(50)NOT NULL primary key,
TENSV VARCHAR(50) NOT NULL,
NGAYSINH DATE NOT NULL,
SDT VARCHAR(50),
EMAIL VARCHAR(50)
);

select *from SINHVIEN;

insert into SINHVIEN(MASINHVIEN, TENSV, NGAYSINH, SDT, EMAIL) VALUES
('SV01', 'NGUYEN MANH A', '2001-05-30', '0943718175', 'manhphuc3005@gmail.com'),
('SV02', 'TRAN THI B', '2004-10-03', '09437658125', 'cilylo10@gmail.com'),
('SV03', 'BUI HUY C', '2006-09-20', '09437176135', 'cilylov3@gmail.com');

DROP TABLE CHITIETSV;

create table CHITIETSV(
MALOP VARCHAR(50),
MASINHVIEN VARCHAR(50),
DIEM FLOAT,
FOREIGN KEY (MALOP) REFERENCES LOPHOC(MALOP),
FOREIGN KEY (MASINHVIEN) REFERENCES SINHVIEN(MASINHVIEN));

insert into CHITIETSV(MALOP, MASINHVIEN, DIEM) VALUES
('LOP01', 'SV01',9.5),
('LOP02', 'SV02',6.5),
('LOP03', 'SV03',5.5);


select *from CHITIETSV;



select 
 MALOP, GIANGVIEN
 FROM LOPHOC;
 
 -- 
 
 UPDATE CHITIETSV
 SET DIEM = '4.6'
 WHERE MASINHVIEN = 'SV01';
 
 select *from CHITIETSV;
 
delete MASINHVIEN
FROM SINHVIEN
where MASINHVIEN = 'SV02';

select *from SINHVIEN;

